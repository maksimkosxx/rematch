!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e=e||self)["@rematch/loading"]={})}(this,(function(e){"use strict";function t(){return(t=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}var n=function(e,n,o){return function(i,c){var a,f,s,r=c||{name:"",action:""},l=r.name,d=r.action;return o.global+=n,o.models[l]+=n,o.effects[l][d]+=n,t({},i,{global:e(o.global),models:t({},i.models,(a={},a[l]=e(o.models[l]),a)),effects:t({},i.effects,(s={},s[l]=t({},i.effects[l],(f={},f[d]=e(o.effects[l][d]),f)),s))})}};e.default=function(e){void 0===e&&(e={});var t=e.name||"loading",o={global:0,models:{},effects:{}},i={global:0,models:{},effects:{}},c=!0===e.asNumber?function(e){return e}:function(e){return e>0},a={name:t,reducers:{hide:n(c,-1,o),show:n(c,1,o)},state:i},f=c(0);return i.global=f,{config:{models:{loading:a}},onModel:function(n,c){var a=n.name;a!==t&&(o.models[a]=0,o.effects[a]={},i.models[a]=f,i.effects[a]={},Object.keys(c.dispatch[a]).forEach((function(n){if(c.dispatch[a][n].isEffect){o.effects[a][n]=0,i.effects[a][n]=f;var s=a+"/"+n;if((!e.whitelist||e.whitelist.includes(s))&&(!e.blacklist||!e.blacklist.includes(s))){var r=c.dispatch[a][n],l=function(){try{c.dispatch[t].show({name:a,action:n});var e=r.apply(void 0,arguments);return(null==e?void 0:e.then)?e.then((function(e){return c.dispatch[t].hide({name:a,action:n}),e})).catch((function(e){throw c.dispatch[t].hide({name:a,action:n}),e})):c.dispatch[t].hide({name:a,action:n}),e}catch(e){throw c.dispatch[t].hide({name:a,action:n}),e}};l.isEffect=!0,c.dispatch[a][n]=l}}})))}}},Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=loading.umd.production.min.js.map
