"use strict";function e(){return(e=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}Object.defineProperty(exports,"__esModule",{value:!0});var t=function(t,n,a){return function(c,i){var o,s,f,r=i||{name:"",action:""},l=r.name,d=r.action;return a.global+=n,a.models[l]+=n,a.effects[l][d]+=n,e({},c,{global:t(a.global),models:e({},c.models,(o={},o[l]=t(a.models[l]),o)),effects:e({},c.effects,(f={},f[l]=e({},c.effects[l],(s={},s[d]=t(a.effects[l][d]),s)),f))})}};exports.default=function(e){void 0===e&&(e={});var n=e.name||"loading",a={global:0,models:{},effects:{}},c={global:0,models:{},effects:{}},i=!0===e.asNumber?function(e){return e}:function(e){return e>0},o={name:n,reducers:{hide:t(i,-1,a),show:t(i,1,a)},state:c},s=i(0);return c.global=s,{config:{models:{loading:o}},onModel:function(t,i){var o=t.name;o!==n&&(a.models[o]=0,a.effects[o]={},c.models[o]=s,c.effects[o]={},Object.keys(i.dispatch[o]).forEach((function(t){if(i.dispatch[o][t].isEffect){a.effects[o][t]=0,c.effects[o][t]=s;var f=o+"/"+t;if((!e.whitelist||e.whitelist.includes(f))&&(!e.blacklist||!e.blacklist.includes(f))){var r=i.dispatch[o][t],l=function(){try{i.dispatch[n].show({name:o,action:t});var e=r.apply(void 0,arguments);return(null==e?void 0:e.then)?e.then((function(e){return i.dispatch[n].hide({name:o,action:t}),e})).catch((function(e){throw i.dispatch[n].hide({name:o,action:t}),e})):i.dispatch[n].hide({name:o,action:t}),e}catch(e){throw i.dispatch[n].hide({name:o,action:t}),e}};l.isEffect=!0,i.dispatch[o][t]=l}}})))}}};
//# sourceMappingURL=loading.cjs.production.min.js.map
