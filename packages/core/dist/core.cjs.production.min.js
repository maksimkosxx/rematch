"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("redux");function r(){return(r=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t])}return e}).apply(this,arguments)}function n(e,r){(null==r||r>e.length)&&(r=e.length);for(var n=0,t=new Array(r);n<r;n++)t[n]=e[n];return t}function t(e,r){var t;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(t=function(e,r){if(e){if("string"==typeof e)return n(e,void 0);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?n(e,void 0):void 0}}(e))||r&&e&&"number"==typeof e.length){t&&(e=t);var o=0;return function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(t=e[Symbol.iterator]()).next.bind(t)}function o(e,r){for(var n={},t=0,o=Object.keys(r.reducers);t<o.length;t++){var u=o[t],d=i(u)?u:r.name+"/"+u;n[d]=r.reducers[u]}var a=function(e,t){return void 0===e&&(e=r.state),t.type in n?n[t.type](e,t.payload):e},c=r.baseReducer,f=c?function(e,n){return void 0===e&&(e=r.state),a(c(e,n),n)}:a;e.forEachPlugin("onReducer",(function(n){f=n(f,r.name,e)||f})),e.reduxConfig.reducers[r.name]=f}function u(r){var n,t,o=r.reduxConfig.rootReducers,u=(t=(n=r.reduxConfig).combineReducers||e.combineReducers,Object.keys(n.reducers).length?t(n.reducers):function(e){return e}),i=u;return o&&Object.keys(o).length&&(i=function(e,r){var n=o[r.type];return u(n?n(e,r):e,r)}),r.forEachPlugin("onRootReducer",(function(e){i=e(i,r)||i})),i}function i(e){return e.indexOf("/")>-1}var d=function(e,r,n,t){return Object.assign((function(t){var o={type:r+"/"+n};return void 0!==t&&(o.payload=t),e.dispatch(o)}),{isEffect:t})};function a(e,r,n){e.dispatch[""+n.name]={},function(e,r,n){for(var t=e.dispatch[n.name],o=0,u=Object.keys(n.reducers);o<u.length;o++){var i=u[o];t[i]=d(e,n.name,i,!1)}var a={};n.effects&&(a="function"==typeof n.effects?n.effects(e.dispatch):n.effects);for(var c=0,f=Object.keys(a);c<f.length;c++){var s=f[c];r.effects[n.name+"/"+s]=a[s].bind(t),t[s]=d(e,n.name,s,!0)}}(e,r,n),r.forEachPlugin("onModel",(function(r){r(n,e)}))}var c=0;function f(e,n){return n?r({},n,e):e}var s=function(n){return function(n){var i=function(e){return{models:(n=e.models,Object.keys(n).map((function(e){return r({name:e,reducers:{}},n[e])}))),reduxConfig:e.redux,forEachPlugin:function(r,n){for(var o,u=t(e.plugins);!(o=u()).done;){var i=o.value;i[r]&&n(i[r])}},effects:{}};var n}(n);i.reduxConfig.middlewares.push(function(e){return function(r){return function(n){return function(t){return t.type in e.effects?(n(t),e.effects[t.type](t.payload,r.getState())):n(t)}}}}(i)),i.forEachPlugin("createMiddleware",(function(e){i.reduxConfig.middlewares.push(e(i))}));var d=function(r){for(var n,i=t(r.models);!(n=i()).done;)o(r,n.value);var d=u(r),a=e.applyMiddleware.apply(e,r.reduxConfig.middlewares),c=function(r){void 0===r&&(r={});var n=r.disabled,t=function(e,r){if(null==e)return{};var n,t,o={},u=Object.keys(e);for(t=0;t<u.length;t++)r.indexOf(n=u[t])>=0||(o[n]=e[n]);return o}(r,["disabled"]);return!n&&"object"==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__(t):e.compose}(r.reduxConfig.devtoolOptions).apply(void 0,r.reduxConfig.enhancers.concat([a])),f=r.reduxConfig.initialState;return(r.reduxConfig.createStore||e.createStore)(d,void 0===f?{}:f,c)}(i),c=r({},d,{name:n.name,addModel:function(e){o(i,e),a(this,i,e),this.replaceReducer(u(i)),d.dispatch({type:"@@redux/REPLACE"})}});!function(e,r){for(var n,o=t(r);!(n=o()).done;){var u=n.value;if(u.exposed)for(var i=function(){var r=a[d],n=u.exposed[r];e[r]="function"==typeof n?function(){for(var r=arguments.length,t=new Array(r),o=0;o<r;o++)t[o]=arguments[o];return n.apply(void 0,[e].concat(t))}:Object.create(u.exposed[r])},d=0,a=Object.keys(u.exposed);d<a.length;d++)i()}}(c,n.plugins),c.addModel.bind(c);for(var f,s=t(i.models);!(f=s()).done;)a(c,i,f.value);return i.forEachPlugin("onStoreCreated",(function(e){c=e(c,i)||c})),c}(function(e){var n,o,u,i=null!==(n=e.name)&&void 0!==n?n:"Rematch Store "+c;c+=1;for(var d,a={name:i,models:e.models||{},plugins:e.plugins||[],redux:r({reducers:{},rootReducers:{},enhancers:[],middlewares:[]},e.redux,{devtoolOptions:r({name:i},null!==(o=null===(u=e.redux)||void 0===u?void 0:u.devtoolOptions)&&void 0!==o?o:{})})},s=t(a.plugins);!(d=s()).done;){var l=d.value;l.config&&(a.models=f(a.models,l.config.models),l.config.redux&&(a.redux.initialState=f(a.redux.initialState,l.config.redux.initialState),a.redux.reducers=f(a.redux.reducers,l.config.redux.reducers),a.redux.rootReducers=f(a.redux.rootReducers,l.config.redux.reducers),a.redux.enhancers=[].concat(a.redux.enhancers,l.config.redux.enhancers||[]),a.redux.middlewares=[].concat(a.redux.middlewares,l.config.redux.middlewares||[]),a.redux.combineReducers=a.redux.combineReducers||l.config.redux.combineReducers,a.redux.createStore=a.redux.createStore||l.config.redux.createStore))}return a}(n||{}))},l=function(){return function(e){var n=e.reducers,t=e.effects;return r({},e,{reducers:void 0===n?{}:n,effects:void 0===t?{}:t})}},v={init:s,createModel:l};exports.createModel=l,exports.default=v,exports.init=s;
//# sourceMappingURL=core.cjs.production.min.js.map
