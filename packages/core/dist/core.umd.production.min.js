!function(e,r){"object"==typeof exports&&"undefined"!=typeof module?r(exports,require("redux")):"function"==typeof define&&define.amd?define(["exports","redux"],r):r((e=e||self)["@rematch/core"]={},e.redux)}(this,(function(e,r){"use strict";function n(){return(n=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t])}return e}).apply(this,arguments)}function t(e,r){(null==r||r>e.length)&&(r=e.length);for(var n=0,t=new Array(r);n<r;n++)t[n]=e[n];return t}function o(e,r){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,r){if(e){if("string"==typeof e)return t(e,void 0);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?t(e,void 0):void 0}}(e))||r&&e&&"number"==typeof e.length){n&&(e=n);var o=0;return function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(n=e[Symbol.iterator]()).next.bind(n)}function u(e,r){for(var n={},t=0,o=Object.keys(r.reducers);t<o.length;t++){var u=o[t],i=d(u)?u:r.name+"/"+u;n[i]=r.reducers[u]}var c=function(e,t){return void 0===e&&(e=r.state),t.type in n?n[t.type](e,t.payload):e},a=r.baseReducer,f=a?function(e,n){return void 0===e&&(e=r.state),c(a(e,n),n)}:c;e.forEachPlugin("onReducer",(function(n){f=n(f,r.name,e)||f})),e.reduxConfig.reducers[r.name]=f}function i(e){var n,t,o=e.reduxConfig.rootReducers,u=(t=(n=e.reduxConfig).combineReducers||r.combineReducers,Object.keys(n.reducers).length?t(n.reducers):function(e){return e}),i=u;return o&&Object.keys(o).length&&(i=function(e,r){var n=o[r.type];return u(n?n(e,r):e,r)}),e.forEachPlugin("onRootReducer",(function(r){i=r(i,e)||i})),i}function d(e){return e.indexOf("/")>-1}var c=function(e,r,n,t){return Object.assign((function(t){var o={type:r+"/"+n};return void 0!==t&&(o.payload=t),e.dispatch(o)}),{isEffect:t})};function a(e,r,n){e.dispatch[""+n.name]={},function(e,r,n){for(var t=e.dispatch[n.name],o=0,u=Object.keys(n.reducers);o<u.length;o++){var i=u[o];t[i]=c(e,n.name,i,!1)}var d={};n.effects&&(d="function"==typeof n.effects?n.effects(e.dispatch):n.effects);for(var a=0,f=Object.keys(d);a<f.length;a++){var s=f[a];r.effects[n.name+"/"+s]=d[s].bind(t),t[s]=c(e,n.name,s,!0)}}(e,r,n),r.forEachPlugin("onModel",(function(r){r(n,e)}))}var f=0;function s(e,r){return r?n({},r,e):e}var l=function(e){return function(e){var t=function(e){return{models:(r=e.models,Object.keys(r).map((function(e){return n({name:e,reducers:{}},r[e])}))),reduxConfig:e.redux,forEachPlugin:function(r,n){for(var t,u=o(e.plugins);!(t=u()).done;){var i=t.value;i[r]&&n(i[r])}},effects:{}};var r}(e);t.reduxConfig.middlewares.push(function(e){return function(r){return function(n){return function(t){return t.type in e.effects?(n(t),e.effects[t.type](t.payload,r.getState())):n(t)}}}}(t)),t.forEachPlugin("createMiddleware",(function(e){t.reduxConfig.middlewares.push(e(t))}));var d=function(e){for(var n,t=o(e.models);!(n=t()).done;)u(e,n.value);var d=i(e),c=r.applyMiddleware.apply(r,e.reduxConfig.middlewares),a=function(e){void 0===e&&(e={});var n=e.disabled,t=function(e,r){if(null==e)return{};var n,t,o={},u=Object.keys(e);for(t=0;t<u.length;t++)r.indexOf(n=u[t])>=0||(o[n]=e[n]);return o}(e,["disabled"]);return!n&&"object"==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__(t):r.compose}(e.reduxConfig.devtoolOptions).apply(void 0,e.reduxConfig.enhancers.concat([c])),f=e.reduxConfig.initialState;return(e.reduxConfig.createStore||r.createStore)(d,void 0===f?{}:f,a)}(t),c=n({},d,{name:e.name,addModel:function(e){u(t,e),a(this,t,e),this.replaceReducer(i(t)),d.dispatch({type:"@@redux/REPLACE"})}});!function(e,r){for(var n,t=o(r);!(n=t()).done;){var u=n.value;if(u.exposed)for(var i=function(){var r=c[d],n=u.exposed[r];e[r]="function"==typeof n?function(){for(var r=arguments.length,t=new Array(r),o=0;o<r;o++)t[o]=arguments[o];return n.apply(void 0,[e].concat(t))}:Object.create(u.exposed[r])},d=0,c=Object.keys(u.exposed);d<c.length;d++)i()}}(c,e.plugins),c.addModel.bind(c);for(var f,s=o(t.models);!(f=s()).done;)a(c,t,f.value);return t.forEachPlugin("onStoreCreated",(function(e){c=e(c,t)||c})),c}(function(e){var r,t,u,i=null!==(r=e.name)&&void 0!==r?r:"Rematch Store "+f;f+=1;for(var d,c={name:i,models:e.models||{},plugins:e.plugins||[],redux:n({reducers:{},rootReducers:{},enhancers:[],middlewares:[]},e.redux,{devtoolOptions:n({name:i},null!==(t=null===(u=e.redux)||void 0===u?void 0:u.devtoolOptions)&&void 0!==t?t:{})})},a=o(c.plugins);!(d=a()).done;){var l=d.value;l.config&&(c.models=s(c.models,l.config.models),l.config.redux&&(c.redux.initialState=s(c.redux.initialState,l.config.redux.initialState),c.redux.reducers=s(c.redux.reducers,l.config.redux.reducers),c.redux.rootReducers=s(c.redux.rootReducers,l.config.redux.reducers),c.redux.enhancers=[].concat(c.redux.enhancers,l.config.redux.enhancers||[]),c.redux.middlewares=[].concat(c.redux.middlewares,l.config.redux.middlewares||[]),c.redux.combineReducers=c.redux.combineReducers||l.config.redux.combineReducers,c.redux.createStore=c.redux.createStore||l.config.redux.createStore))}return c}(e||{}))},v=function(){return function(e){var r=e.reducers,t=e.effects;return n({},e,{reducers:void 0===r?{}:r,effects:void 0===t?{}:t})}},p={init:l,createModel:v};e.createModel=v,e.default=p,e.init=l,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=core.umd.production.min.js.map
